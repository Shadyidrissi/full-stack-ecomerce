import process from"node:process";

import{handleInvalidOpts}from"./options/invalid.js";
import{waitForTimeout}from"./timeout.js";


export const validateExitCode=(exitCode,optName)=>{
if(
!Number.isInteger(exitCode)||
exitCode<MIN_EXIT_CODE||
exitCode>MAX_EXIT_CODE)
{
handleInvalidOpts(
`must be between ${MIN_EXIT_CODE} and ${MAX_EXIT_CODE}`,
exitCode,
optName
)
}
};



export const exitProcess=(exitCode,timeout)=>{
process.exitCode=exitCode;
waitForTimeout(timeout,()=>{

process.exit(exitCode)
})
};


const MIN_EXIT_CODE=0;

const MAX_EXIT_CODE=124;

export const INVALID_OPTS_EXIT_CODE=125;

export const DEFAULT_EXIT_CODE=1;